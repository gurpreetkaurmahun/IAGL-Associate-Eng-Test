{"ast":null,"code":"var _jsxFileName = \"/Users/gurpreetkaurmahun/Desktop/iagl-todo-app/IAGL-Associate-Eng-Test/src/component/Newtodo.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { connect } from 'react-redux';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { Form, Formik, Field, ErrorMessage } from \"formik\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addTodos, updateToDosStatus } from \"../actions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction NewToDo() {\n  _s();\n  const [message, setMessage] = useState();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  const todo = useSelector(state => id ? state.data.find(todo => String(todo.id) === String(id)) : null);\n  const error = useSelector(state => state.error);\n  const [initialValues, setInitialValues] = useState({\n    id: \"\",\n    title: \"\",\n    description: \"\",\n    dueDate: \"\"\n  });\n  useEffect(() => {\n    if (id && todo) {\n      setInitialValues({\n        id: todo.id,\n        title: todo.title || \"\",\n        description: todo.description || \"\",\n        dueDate: todo.dueDate ? todo.dueDate.slice(0, 10) : \"\"\n      });\n    }\n  }, [id, todo]);\n  function onSubmit(values, _ref) {\n    let {\n      setSubmitting\n    } = _ref;\n    console.log(\"Values\", values);\n    if (id) {\n      dispatch(updateToDosStatus(id, values.isCompleted)).then(() => {\n        console.log(\"updated values are\", values);\n        setSubmitting(false);\n        navigate(\"/\");\n      }).catch(error => {\n        console.log(error);\n        setMessage(error.ErrorMessage);\n        setTimeout(() => setMessage(\"\"), 2000);\n      });\n    } else {\n      dispatch(addTodos(values.title, values.description, values.dueDate)).then(() => {\n        setSubmitting(false);\n        navigate(\"/\");\n      }).catch(err => {\n        console.error(\"Error Adding todo\", err);\n        setSubmitting(false);\n      });\n    }\n  }\n  function validate(values) {\n    let errors = {};\n    if (values.description.length < 5) {\n      errors.description = \"Minimum characters in description is 5\";\n    }\n    return errors;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mb-4 todo_heading\",\n      children: \"Enter your new todo details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Formik, {\n      initialValues: initialValues,\n      enableReinitialize: true,\n      onSubmit: onSubmit,\n      validate: validate,\n      validateOnBlur: false,\n      validateOnChange: false,\n      children: props => {\n        return /*#__PURE__*/_jsxDEV(Form, {\n          children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"alert alert-danger\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 44\n          }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n            name: \"description\",\n            component: \"div\",\n            className: \"alert alert-warning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"todo_label\",\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              type: \"text\",\n              className: \"form-control\",\n              name: \"title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"todo_label\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(Field, {\n              type: \"text\",\n              className: \"form-control \",\n              name: \"description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center my-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-success\",\n              type: \"submit\",\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(NewToDo, \"8e3DHPstHjoVvSdIAfdpS0CqfEM=\", false, function () {\n  return [useDispatch, useNavigate, useParams, useSelector, useSelector];\n});\n_c = NewToDo;\nexport default connect(null)(NewToDo);\nvar _c;\n$RefreshReg$(_c, \"NewToDo\");","map":{"version":3,"names":["useEffect","useState","connect","useNavigate","useParams","Form","Formik","Field","ErrorMessage","useDispatch","useSelector","addTodos","updateToDosStatus","NewToDo","message","setMessage","dispatch","navigate","id","todo","state","data","find","String","error","initialValues","setInitialValues","title","description","dueDate","slice","onSubmit","values","setSubmitting","console","log","isCompleted","then","catch","setTimeout","err","validate","errors","length","props"],"sources":["/Users/gurpreetkaurmahun/Desktop/iagl-todo-app/IAGL-Associate-Eng-Test/src/component/Newtodo.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\nimport { connect } from 'react-redux';\nimport { useNavigate, useParams } from \"react-router-dom\"\nimport { Form, Formik, Field, ErrorMessage } from \"formik\"\nimport { useDispatch, useSelector } from 'react-redux';\n\n\nimport { addTodos, updateToDosStatus } from \"../actions\";\n\nfunction NewToDo(){\n\n    const[message,setMessage]=useState();\n    const dispatch=useDispatch();\n    const navigate=useNavigate();\n    const {id} = useParams();\n\n\n    const todo = useSelector((state) =>\n    id ? state.data.find((todo) => String(todo.id) === String(id)) : null);\n    const error = useSelector((state) => state.error);\n\n    const [initialValues,setInitialValues]=useState({\n        id:\"\",\n        title:\"\",\n        description:\"\",\n        dueDate:\"\"\n    })\n\n\n\n    useEffect(() => {\n        if (id && todo) {\n          setInitialValues({\n            id:todo.id,\n            title: todo.title || \"\",\n            description: todo.description || \"\",\n            dueDate: todo.dueDate ? todo.dueDate.slice(0, 10) : \"\"\n          });\n        }\n      }, [id, todo]);\n\n  \n\nfunction onSubmit(values, { setSubmitting }) {\n\n    console.log(\"Values\",values);\n    if (id) {\n        dispatch(updateToDosStatus(id, values.isCompleted))\n            .then(() => {\n                console.log(\"updated values are\",values);\n                setSubmitting(false);\n                navigate(\"/\");\n            }).catch(\n                error => {\n                    console.log(error)\n                    setMessage(error.ErrorMessage)\n                    setTimeout(()=> setMessage(\"\"), 2000)\n            });\n    } else {\n        dispatch(addTodos(values.title, values.description, values.dueDate))\n            .then(() => {\n                setSubmitting(false);\n                navigate(\"/\");\n            })\n            .catch((err) => {\n                console.error(\"Error Adding todo\", err);\n                setSubmitting(false);\n            });\n    }\n}\n    function validate(values){\n        let errors = {}\n\n        if (values.description.length < 5)\n        {\n            errors.description =  \"Minimum characters in description is 5\"\n        }\n        return errors;\n    }\n\n\n    return (\n        <div className=\"container-fluid\">\n            <h1 className=\"mb-4 todo_heading\">Enter your new todo details</h1>\n            <Formik \n            initialValues={initialValues} \n            enableReinitialize={true}\n            onSubmit={onSubmit}\n            validate={validate}\n            validateOnBlur={false}\n            validateOnChange={false}>\n                {\n                    (props) => {\n                        return (\n                            <Form>\n                                 {error && <div className=\"alert alert-danger\">{error}</div>}\n\n                                <ErrorMessage\n                                    name=\"description\"\n                                    component=\"div\"\n                                    className=\"alert alert-warning\"\n                                />\n\n                           \n                                <fieldset className=\"form-group\">\n                                    <label className=\"todo_label\">Title</label>\n                                    <Field type=\"text\" className=\"form-control\" name=\"title\"/>\n                                </fieldset>\n\n                                <fieldset className=\"form-group\">\n                                    <label className=\"todo_label\">Description</label>\n                                    <Field type=\"text\" className=\"form-control \" name=\"description\"/>\n                                </fieldset>\n\n                           \n\n                                <div className=\"text-center my-4\">\n                                    <button className=\"btn btn-success\" type=\"submit\">\n                                        Save\n                                    </button>\n                            </div>\n                            </Form>\n                        )\n                    }\n                }\n            </Formik>\n        </div>\n    )\n}\n\nexport default connect(\n  null\n)(NewToDo);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}